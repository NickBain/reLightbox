(function(g){void 0===Object.create&&(Object.create=function(b){function a(){}a.prototype=b;return new a});var h={auto:!0,overlayDiv:"reLightboxOverlay",innerDiv:"reLightboxPopup",imageId:"reLightboxImg",fullscreen:!1,preload:!1,keyboardNav:!0},d=function(b,a){this.properties=Object.create(h);this.element=b;this.currentIndex=!1;if(a)for(var c in a)this.properties[c]=a[c];this.init()};d.prototype={init:function(){this.lightboxOverlay=this._getElement(this.properties.overlayDiv);this.lightboxInner=
this._getElement(this.properties.innerDiv);this.lightboxOverlay.className="rlb_invisible";this.imageElement;this.nodeList;this.keyListener;this._setInnerHTML(this.lightboxInner);var b=this,a=function(a){b.hide(a)};this.lightboxInner.addEventListener?this.lightboxInner.addEventListener("click",a,!1):this.lightboxInner.attachEvent&&this.lightboxInner.attachEvent("click",a);this.nodeList=document.querySelectorAll(this.element);this.properties.preload&&this._preload(this.nodeList);for(a=0;a<this.nodeList.length;++a){var c=
a;this.nodeList[a].addEventListener("click",function(a){a.preventDefault();b.show(c)},!1)}},_getElement:function(b){var a=document.getElementById(b);return a?a:this._createElement(b)},_createElement:function(b){var a=document.createElement("div");a.id=b;document.body.appendChild(a);return a},_setInnerHTML:function(b){b.innerHTML='<img id="'+this.properties.imageId+'"/>'},show:function(b,a){var c=a?a:this.nodeList[b].href;this.currentIndex="undefined"===typeof b?!1:b;var d=document.getElementById(this.properties.imageId);
if(this.lightboxInner){this.lightboxOverlay.className="rlb_visible";this.lightboxInner.style.visibility="visible";var e=new Image,f=this;e.onload=function(){d.src=this.src};e.onerror=function(){console.log("Error fetching image");f.hide()};e.onabort=function(){console.log("Abort loading image");f.hide()};e.src=c;this.imageElement=d;this.properties.fullscreen&&this._goFullscreen();this._removeKeyBoardListener();this._addKeyBoardListener()}},hide:function(){this.lightboxInner&&(this.lightboxOverlay.className=
"rlb_invisible",this.lightboxInner.style.visibility="hidden");this.properties.fullscreen&&this._exitFullscreen()},_addKeyBoardListener:function(){if(this.properties.keyboardNav){var b=this,a=function(){b._respondToKeyPress(event,b)};document.addEventListener("keyup",a,!1);this.keyListener=a}},_respondToKeyPress:function(b,a){1>a.nodeList.length||(39==b.keyCode&&!1!==a.currentIndex&&(a.nodeList[a.currentIndex+1]?a.show(a.currentIndex+1):a.show(0)),37==b.keyCode&&!1!==a.currentIndex&&(a.nodeList[a.currentIndex-
1]?a.show(a.currentIndex-1):a.show(a.nodeList.length-1)))},_removeKeyBoardListener:function(){this.properties.keyboardNav&&document.removeEventListener("keyup",this.keyListener)},_goFullscreen:function(){var b=this.lightboxInner;b.requestFullscreen?b.requestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullScreen&&b.webkitRequestFullScreen()},_exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():
document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},_preload:function(b){Array.prototype.forEach.call(b,function(a){var b=new Image;b.onload=function(){console.log("loaded")};b.src=a.href})}};g.reLightbox=function(b,a){return new d(b,a)}})(window);